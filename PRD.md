# 웹 기반 스도쿠 게임 PRD

## 1. 개요
- 프로젝트명: Vibe Codex Sudoku
- 목표: 브라우저에서 매끄럽게 플레이 가능한 2D 스도쿠 게임을 개발하고, GitHub Pages를 통한 온라인 배포 및 테스트 환경을 구축한다.
- 대상 플랫폼: 데스크톱 및 모바일 웹 브라우저 (최소 Chrome, Firefox, Safari 최신 2개 버전)

## 2. 핵심 목표 및 성공 지표
- 핵심 목표
  - 사용자가 3분 이내에 게임 룰과 UI를 이해하고 플레이를 시작할 수 있을 정도의 직관적 UX 제공
  - 로컬 빌드 및 GitHub Pages 배포 환경에서 동일하게 동작하는 안정적인 코드베이스 구축
  - 애니메이션 및 효과를 통해 몰입감 있는 플레이 경험 제공
- 성공 지표
  - 첫 방문자가 온보딩 후 1분 내 퍼즐 입력 성공률 80% 이상 (내부 플레이 테스트 기준)
  - GitHub Actions 기반 자동 배포 파이프라인 성공률 100%
  - 60fps 렌더링 유지 (DevTools Performance 측정, 일반 난이도 기준)

## 3. 사용자 스토리
- 플레이어로서, 난이도를 선택하고 새 스도쿠 퍼즐을 시작할 수 있어야 한다.
- 플레이어로서, 숫자를 입력/삭제하면서 실시간으로 퍼즐 해결 상태를 확인할 수 있어야 한다.
- 플레이어로서, 메모(노트) 기능을 사용하여 후보 숫자를 표시할 수 있어야 한다.
- 플레이어로서, 실수했을 때 즉시 되돌리기/다시하기 기능을 이용해 수정할 수 있어야 한다.
- 플레이어로서, 힌트가 필요할 때 1셀 단위 힌트를 요청할 수 있어야 한다.
- 플레이어로서, 플로우가 끊기지 않도록 부드러운 애니메이션과 피드백을 받을 수 있어야 한다.
- 플레이어로서, 모바일 기기에서도 터치 기반으로 플레이가 가능해야 한다.

## 4. 기능 요건
- 퍼즐 관리 (Domain 레이어)
  - 쉬움/보통/어려움 난이도별 퍼즐 데이터 생성 또는 로딩 (초기엔 정적 JSON, 추후 알고리즘 생성 고려)
  - 퍼즐 검증 로직 (행/열/박스 중복 검사)
  - 퍼즐 완료 판정 및 완료 연출, 완료 이벤트를 애플리케이션 레이어에 전달
- UI/UX (Interface 레이어)
  - 반응형 레이아웃: 최소 320px~1440px 범위에서 최적화
  - 키보드 및 터치 입력 지원
  - 선택 셀 하이라이트, 동일 숫자 강조, 행/열 강조 효과
  - 힌트, 되돌리기, 다시하기, 자동 메모 토글 버튼 제공
  - 상태 표시: 경과 시간, 남은 실수 가능 횟수(옵션), 난이도 표시
- 이펙트 및 애니메이션 (Effects 레이어)
  - 셀 선택/입력 시 부드러운 스케일/컬러 트랜지션, UI는 이펙트 훅/서비스의 인터페이스만 호출
  - 퍼즐 완성 시 축하 애니메이션 및 사운드(브라우저 호환 고려), 이펙트 토글 상태를 인프라 레이어에서 주입
  - 불법 입력 시 진동/시각적 피드백, 디바이스별 폴백 전략 명시
- 접근성
  - 색각 보조 테마 지원 (명암 대비 4.5:1 이상 목표)
  - 키보드 네비게이션 및 스크린 리더 친화적 ARIA 라벨링
- 저장 기능 (Infrastructure 레이어)
  - 로컬 스토리지 기반 진행 상황 자동 저장 및 로드
  - 사용자 설정(테마, 효과 On/Off 등) 저장
- 국제화 대비 (Infrastructure/Shared)
  - 텍스트 리소스를 별도 JSON/JS 모듈로 분리하여 다국어 확장 가능 구조 마련

## 5. 비기능 요건
- 성능
  - 초기 로드 타임 2초 이하 (GitHub Pages 동작 기준, 4G 네트워크, LightHouse 측정)
  - 번들 크기 250KB GZIP 이하 유지 목표 (이미지/폰트 제외)
- 코드 품질
  - eslint, prettier, stylelint 적용 및 CI에서 검사
  - Jest 또는 Vitest 기반 단위 테스트 커버리지 70% 이상 (로직 중심)
  - GitHub Actions로 PR 시 lint/test 자동 실행
  - 레이어 간 의존성 규칙을 lint(예: eslint-plugin-boundaries)로 강제하여 클린 아키텍처 위배 방지
- 배포
  - GitHub Pages (브랜치: `gh-pages` 또는 GitHub Action Deploy)에서 SPA 라우팅 호환되도록 상대 경로 사용
  - 환경 구분: 개발(`npm start`), 프로덕션 빌드(`npm run build`)에서 동일한 자산 경로 유지

## 6. 기술 스택 및 클린 아키텍처
- **기술 스택**
  - 언어 및 런타임: JavaScript (ES2020+), Node.js LTS
  - 프레임워크/라이브러리: React + Vite, 상태 관리는 Zustand 또는 Redux Toolkit 검토
  - 스타일링: Tailwind CSS 또는 CSS Modules + PostCSS, 애니메이션 파이프라인은 Framer Motion/GSAP 중 선택
  - 테스트: Vitest + React Testing Library
  - 번들링/빌드: Vite, GitHub Pages 배포용 `vite.config.js`에서 `base` 옵션 상대 경로 설정
- **아키텍처 원칙**
  - 클린 아키텍처를 적용해 Domain, Application, Interface(UI/UX), Infrastructure, Effects 층을 분리한다.
  - 각 레이어는 상위 계층에 의존하지 않고 정의된 인터페이스를 통해서만 상호 작용한다.
  - 이펙트, UI, 모델 코드를 분리해 AI 협업 시 특정 영역만 안전하게 교체·확장할 수 있도록 한다.
- **레이어 & 디렉터리 구성**
  - `src/domain`: 퍼즐 엔티티, 값 객체, 규칙 검증, 난이도 정책 등 순수 로직. 외부 의존성 금지.
  - `src/application`: 유스케이스, 퍼즐 진행 상태 머신, 명령/쿼리 서비스. Domain에만 의존.
  - `src/ui`: React 컴포넌트, 페이지, 상태 훅. Application 인터페이스만 호출.
  - `src/effects`: 애니메이션, 사운드, 햅틱 등 부수효과 모듈. UI에 훅/서비스 형태로 주입.
  - `src/infrastructure`: 로컬 스토리지, 퍼즐 데이터 로더, i18n 리소스, 네트워크 어댑터.
  - `src/shared`: 타입 정의, 유틸리티, 테마 토큰 등 레이어 간 공유 가능한 순수 모듈.
  - `public` 및 `src/assets`: 정적 자원, 매니페스트, 아이콘, 오디오 등.
- **협업 및 AI 가이드**
  - 이펙트 관련 실험은 `src/effects` 이하에서만 진행하고, UI에는 사전 정의된 인터페이스로 연결한다.
  - 모델/로직 개선 시 `src/domain` 또는 `src/application` 변경에 집중하며, 변경 사항은 단위 테스트로 검증한다.
  - UX 팀은 `src/ui` 내부에서 스타일과 인터랙션을 조절하되, Domain 객체를 직접 수정하지 않는다.
  - 공통 계약(예: 애니메이션 트리거, 이벤트 버스)은 `src/shared`에 정의해 레이어 간 규칙을 문서화한다.

## 7. UX/UI 요구 사항
- 테마: 미니멀하면서도 생동감 있는 파스텔 톤, 다크 모드 지원
- 타이포그래피: 가독성 높은 산세리프 (예: Inter, Noto Sans), 웹폰트 사전 로드
- 인터랙션 설계
  - 셀 선택 시 시각적 포커스 링
  - 숫자 패드 UI (모바일 고려), 단축키(키보드 1~9, 화살표) 지원
  - 힌트 사용 시 남은 힌트 수 표시 및 딜레이 애니메이션
- 효과
  - `prefers-reduced-motion` 설정 감지하여 애니메이션 축소
  - 사운드는 사용자 동의 후 재생, 설정에서 On/Off 가능

## 8. 데이터 및 컨텐츠 전략
- 퍼즐 데이터: 초기에는 검증된 JSON 세트를 사용, 향후 퍼즐 생성 알고리즘 도입 계획 명시
- 로깅: 기본적으로 Google Analytics 4 등 외부 추적은 MVP 범위에서 제외, 자체 플레이 로그는 로컬에만 저장
- 라이선스: 공개 퍼즐 데이터 사용 시 출처 명시

## 9. 일정 및 마일스톤(예시)
1. 주차 1: 프로젝트 설정, 클린 아키텍처 디렉터리 구성, 기본 UI 레이아웃 및 어댑터 골격
2. 주차 2: Domain/Application 레이어 구현(검증, 노트, 힌트), 로컬 저장 인프라 연결
3. 주차 3: Effects 레이어 구축, 애니메이션/사운드 적용, 접근성 개선 및 반응형 마감
4. 주차 4: 통합 테스트 강화, CI/CD 구축, 성능 튜닝 및 GitHub Pages 배포

## 10. 리스크 및 대응 계획
- 퍼즐 생성 알고리즘 개발 지연 → 외부 퍼즐 데이터셋으로 MVP 우선 출시
- 애니메이션으로 인한 성능 저하 → GPU 가속 CSS 활용, 애니메이션 조건부 비활성화 옵션 제공
- 모바일 UX 미흡 → 터치 디바이스에서 조기 사용자 테스트 진행 및 이슈 반영
- GitHub Pages 배포 실패 → 로컬 테스트 + GitHub Actions 워크플로 코드리뷰, 필요 시 Cloudflare Pages 등 대안 검토

## 11. 향후 확장 계획
- 사용자 계정 연동 및 클라우드 저장
- 데일리 챌린지, 랭킹 등 소셜 기능
- 난이도 조정 가능한 퍼즐 생성 AI 도입
- 다국어 지원, 튜토리얼 모드 추가

## 12. 참고 링크 및 문서
- GitHub Pages 배포 가이드: https://docs.github.com/en/pages
- Vite 공식 문서: https://vitejs.dev/guide/
- React 애플리케이션 접근성: https://reactjs.org/docs/accessibility.html
- 스도쿠 퍼즐 생성 알고리즘 참고: https://www.sudokuwiki.org/sudoku_creation_and_grading
